import edu.princeton.cs.algs4.*;
import java.net.*;
import java.io.*;

public class AutoHTTPS {
    
    public static boolean isReachableHTTP(String host) {
        
        try {
            HttpURLConnection con = (HttpURLConnection) new URL(host).openConnection();
            con.setRequestMethod("HEAD");
            int responseCode = con.getResponseCode();
            return (200 <= responseCode && responseCode <= 399);
        } catch (IOException exception) {
            return false;
        }
    }
    

    public static void main(String[] args) {
        
        // time it, for the sake of curiousity
        Stopwatch time = new Stopwatch();
        
        // read in file
        In in = new In(args[0]);
        
        // how many of the websites to test
        int N = Integer.parseInt(args[1]);
        if (N < 1 || N > 1000000) {
            throw new IndexOutOfBoundsException("N must be between 1 "
                                                    + "and 1 million");
        }
        
        StdOut.println(N + " items from " + args[0]);
        
        // connect on http
        String site = new String();
        for (int i = 0; i < N; i++) {
            site = in.readString().replaceFirst("^", "http://");
            if (isReachableHTTP(site)) {
                StdOut.println(i + 1 + ": " + site);
            }
        }
        
        StdOut.println();
        
        StdOut.println(time.elapsedTime() + " seconds");
    }
}
