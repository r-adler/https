import edu.princeton.cs.algs4.*;
import java.net.*;
import java.io.*;

public class AutoHTTPS {
    
    
    public static boolean isReachable(String url) {
        
        if (url == null)
            return false;
        
        try {
            URL u = new URL(url);
            HttpURLConnection huc = (HttpURLConnection) u.openConnection();
            huc.setRequestMethod("GET");
            //huc.setReadTimeout(readTimeOut);
            huc.setInstanceFollowRedirects(false); // ADD THIS LINE
            huc.connect();
            int code = 0;
            if (u.getHost() != null)
                code = huc.getResponseCode();   
            huc.disconnect();
            return (200 <= code && code <= 399);
        }
        catch(Exception ee) return false;
    }
    
    public static void DNS(String host) {
        
        try {
            InetAddress inetAddress = InetAddress.getByName(host);
            // show the Internet Address as name/address
            System.out.println(inetAddress.getHostName() + " " 
                                   + inetAddress.getHostAddress());
        }
        catch (UnknownHostException exception) {
            System.err.println("ERROR: Cannot access '" + host + "'");
        }
    }
    
    public static void main(String[] args) {
        
        Stopwatch time = new Stopwatch();
        
        //String filename = args[0];
        In in = new In(args[0]);
        //StdOut.println(filename);
        
        // how many of the websites to test.
        int N = Integer.parseInt(args[1]);
        
        StdOut.println("# of sites to test: " + N);
        
        // create array
        String[] array = new String[N];
        for (int i = 0; i < N; i++) {
            array[i] = in.readString();
            if (!isReachable(array[i])) StdOut.print(array[i] + " ");
        }
        
//        String s = new String();
//        for (int i = 0; i < N; i++) {
//            s = "http://" + in.readString();
//            if (isReachable(s)) {
//                StdOut.println(i + 1 + ": " + s);
//            }
//        }
        

        for (int i = 0; i < N; i++) {
            DNS(in.readString());
        }
        
        StdOut.println();
        
        StdOut.println(time.elapsedTime() + " seconds");
    }
    
}
